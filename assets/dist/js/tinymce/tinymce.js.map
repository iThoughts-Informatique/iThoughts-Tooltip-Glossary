{"version":3,"sources":["../../../build/js/tinymce/tinymce.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","module","ithoughts","iThoughts","v5","$","isNA","itg","iThoughtsTooltipGlossary","htmlAttrs","maybePrefixAttribute","includes","attrName","startsWith","extractAttrs","ret","Array","prototype","slice","node","attributes","forEach","attr","nodeName","nodeValue","generateTakeAttr","attrs","tagName","label","defaultValue","noDataPrefix","hasOwnProperty","val","get","object","path","defaulted","segment","isTrueValue","toLowerCase","htmlEncode","text","str","html","htmlDecode","sendAjaxQuery","action","data","nonce","loader","makeLoader","Promise","resolve","reject","sendData","_wpnonce","ajax","method","async","url","admin_ajax","success","remove","error","xhr","itge","iThoughtsTooltipGlossaryEditor","initTab","$tabs","cb","click","onClick","$this","parent","find","removeClass","addClass","index","children","filter","initTinymceEditors","$editors","each","editor","getAttribute","newId","Math","random","toString","replace","substr","setAttribute","editorId","value","tinymce","init","selector","menubar","external_plugins","base_assets","wordcount","plugins","toolbar","min_height","height","resize","intervalContent","setInterval","subeditor","getDoc","getBody","log","JSON","stringify","clearInterval","setContent","removeTinymceEditor","EditorManager","execCommand","warn","editors","findEditor","id","replaceQuotes","OptArray","opts","key","addOpt","specEncode","trim","match","String","addValue","name","Object","keys","map","generateAttr","join","utils","filters","domUtils","$d","$w","$formDom","formDom","formType","info","initTipForm","tooltipOpts","prop","on","switchMode","hide","show","keyup","closeForm","setTimeout","finishTipTinymce","mediaFrame","wp","media","frame","state","library","type","multiple","json","first","toJSON","link","caption","open","input","completerHolder","completerHolderContainer","searchedString","request","losefocustest","is","searchMatchingRes","contains","terms","indx","element","title","indexOf","slug","push","searchResults","concat","unique","item","pos","self","empty","thislang","append","parseHTML","content","resizeWindow","event","currentTarget","top","offset","scrollTop","bottom","css","maxHeight","focusin","abort","removeAccents","$nonce","dataType","search","_ajax_nonce","complete","res","response","responseJSON","nonce_refresh","searched","removeAttribute","initAdvancedConfiguration","$opts","$tooltip","skip","span","$form","getOptsObject","form","formElems","elements","tristates","valid","formFields","attributesList","getAttributeValue","toArray","types","validity","focus","getTristateValue","extend","serializeInputsObject","dataset","serializeObject","arrK","arrV","j","J","min","prefix","filterPrototypeInputs","closest","checkRemoveAttr","thisInput","$container","otherInput","filterNotThisInput","ensureRemoveContainer","document","activeElement","attrVal","change","onTristateChange","ts","checked","indeterminate","showAttributesWindow","closeDiscardAttributesWindow","closeAcceptAttributesWindow","onQtipKeepOpenChange","modeInput","textInput","mtInput","oldValue","lockQtipTrigger","disabled","onPositionMyChange","base","inputV","inputH","inputsHV","inputS","changePositionMy","onPositionAtChange","bind","onKvPairAdd","$invalidInputs","eq","$prototype","$clone","clone","newIdParts","Date","getTime","setForOrId","hasClass","blur","videoUrlChanged","videodata","formatType","formats","youtube","regex","embed","video","dailymotion","direct","gloss","disable_auto_translation","tooltip","getContent","mediatip_type","mediatip_content","mediatipCaption","mediatip_link","initListForm","initGroupsPicker","$ids","$text","$groupsPicker","$catchEvent","$checkboxes","toggleClass","catchEvent","stopImmediatePropagation","off","one","onGroupCheckboxChanged","$checked","texts","ids","checkedAppendToArray","onClickValidate","alpha","group","desc","cols","finishListTinymce","onClickDiscard","comon","attrsMatcher","attributesToOpts","inner","attrMatched","handleOpt","maybePrefixOpt","exec","opt","tip","all","tag","list","restore","formHandler","setToggleable","setToggleState","active","replaceShortcodes","replaceShortcodesEl","restoreShortcodes","restoreShortcodesEl","PluginManager","add","contentCSS","baseurl","tipsSelector","fire","isInList","insertInTinyMCE","shortcode","mode","selection","select","getStart","insertContent","addButton","getLang","image","onPostRender","onclick","editorForms","generateSelObject","result","finalContent","QTags","$currentNode","getNode","$node","replaceWith","innerHTML","xhrError","statusText","status","lang","growl","splitAttr","attrsStr","separator","split","Function","tristate","tipsTypes","txtarea","sel","substring","selectionStart","selectionEnd","DOM","start","end","last","tinymceSel","format","getEnd","displayInForm","$newDom","body","opacity","animate","hideOutForm","$dom","values","takeAttr","alphas","groups","parseInt","resultDom","tail","optArr","escapeContent","positionAt","positionMy","myInverted","max","invert","undefined","tooltipContent","mediatip","contenttype","tipRounded","tipShadow","tipStyle","tipTrigger","position","at","my","anim","in","out","time","maxwidth","elem","optsAttrs","maybeAddOpt","reverse","encodeURI","glossId","tooltip_content","global","Op","hasOwn","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","inModule","runtime","regeneratorRuntime","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","fn","obj","arg","err","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","constructor","displayName","defineIteratorMethods","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","__await","AsyncIterator","invoke","record","then","unwrapped","process","domain","previousPromise","enqueue","callInvokeWithMethodAndArg","iter","next","done","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","return","TypeError","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","pop","iterable","iteratorMethod","isNaN","skipTempReset","prev","charAt","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","finish","thrown","delegateYield","window","characterMap","chars","allAccents","RegExp","firstAccent","string","hasAccents","has"],"mappings":"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","file":"tinymce.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nrequire( 'regenerator-runtime/runtime' );\n\nconst ithoughts = iThoughts.v5;\nconst {\n\t$, isNA,\n} = ithoughts;\n\nconst itg = iThoughtsTooltipGlossary;\n\nconst htmlAttrs = [ 'href', 'title' ];\n\nconst maybePrefixAttribute = attrName => {\n\t// If the key is not an HTML attribute and is not `data-` prefixed, prefix it\n\tif ( !htmlAttrs.includes( attrName ) && !attrName.startsWith( 'data-' )) {\n\t\treturn `data-${  attrName  }`;\n\t} else {\n\t\treturn attrName;\n\t}\n};\n\nconst extractAttrs = node => {\n\tconst ret = {};\n\tArray.prototype.slice.call( node.attributes, 0 ).forEach( attr => {\n\t\tret[attr.nodeName] = attr.nodeValue;\n\t});\n\treturn ret;\n};\n\nconst generateTakeAttr = attrs => {\n\t// If we received a node instead of an object, extract its attributes\n\tif ( attrs.tagName ) {\n\t\tattrs = extractAttrs( attrs );\n\t}\n\t// Return the picker function\n\treturn ( label, defaultValue, noDataPrefix = false ) => {\n\t\tif ( !noDataPrefix ) {\n\t\t\tlabel = maybePrefixAttribute( label );\n\t\t}\n\t\tif ( attrs.hasOwnProperty( label )) {\n\t\t\tconst val = attrs[label];\n\t\t\tdelete attrs[label];\n\t\t\treturn val;\n\t\t} else {\n\t\t\treturn defaultValue;\n\t\t}\n\t};\n};\n\nconst get = ( object, path, defaultValue ) => {\n\tlet defaulted = false;\n\tpath.forEach( segment => {\n\t\tif ( typeof object !== 'undefined' && object.hasOwnProperty( segment )) {\n\t\t\tobject = object[segment];\n\t\t} else {\n\t\t\tdefaulted = true;\n\t\t}\n\t});\n\tif ( defaulted ) {\n\t\treturn defaultValue;\n\t} else {\n\t\treturn object;\n\t}\n};\n\nconst isTrueValue = val => {\n\tif ( 'string' === typeof val && ( '1' === val || 'true' === val.toLowerCase())) {\n\t\treturn true;\n\t} else if ( 'number' === typeof val ) {\n\t\treturn val > 0;\n\t}\n\treturn false;\n};\n\nconst htmlEncode = str => $( '<textarea />' ).text( str ).html();\nconst htmlDecode = str => $( '<textarea />' ).html( str ).text();\n\nconst sendAjaxQuery = ( action, data, nonce ) => {\n\tconst loader = ithoughts.makeLoader();\n\treturn new Promise(( resolve, reject ) => {\n\t\tconst sendData = {\n\t\t\taction: `ithoughts_tt_gl_${ action }`,\n\t\t};\n\t\tif ( !isNA( nonce )) {\n\t\t\tsendData._wpnonce = nonce;\n\t\t}\n\t\tif ( !isNA( data )) {\n\t\t\tsendData.data = data;\n\t\t}\n\t\t$.ajax({\n\t\t\tmethod:\t'POST',\n\t\t\tasync:  true,\n\t\t\turl:    itg.admin_ajax,\n\t\t\t//\t\t\tdataType: 'json',\n\t\t\tdata:   sendData,\n\t\t\tsuccess( data ) {\n\t\t\t\tloader.remove();\n\t\t\t\treturn resolve( data );\n\t\t\t},\n\t\t\terror( xhr ) {\n\t\t\t\tloader.remove();\n\t\t\t\titg.error( 'Error while doing XHR request:', xhr );\n\t\t\t\treturn reject( xhr );\n\t\t\t},\n\t\t});\n\t});\n};\n\n\nmodule.exports = {\n\tmaybePrefixAttribute,\n\textractAttrs,\n\tgenerateTakeAttr,\n\tget,\n\tisTrueValue,\n\thtmlEncode,\n\thtmlDecode,\n\tsendAjaxQuery,\n};\n\n},{\"regenerator-runtime/runtime\":8}],2:[function(require,module,exports){\n'use strict';\n\nconst ithoughts = iThoughts.v5;\nconst itge      = iThoughtsTooltipGlossaryEditor;\n\nconst {\n\t$\n} = ithoughts;\n\n// ##### `initTab`: Set up a tab switcher element\n/**\n * @function initTab\n * @description Set up a tab switcher element\n * @author Gerkin\n * @param {jQuery} $tabs jQuery selector containing the tabs triggers\n * @param {Function} [cb] Function to execute with cb( newIndex )\n * @returns {undefined}\n */\nconst initTab = ( $tabs, cb ) => {\n\t$tabs.click( function onClick() {\n\t\tconst $this = $( this );\n\t\t// First, clean the `active` class on all siblings, then set it only on event emitter\n\t\t$this.parent().find( '.active' ).removeClass( 'active' );\n\t\t$this.addClass( 'active' );\n\n\t\t// Then, we check the index of the clicked element (`this`) in the parent, and we set active the tab with the same index\n\t\tconst index = $this.index();\n\t\t$this.parent().parent().find( ' > .active' ).removeClass( 'active' );\n\t\t$( $this.parent().parent().children()[index + 1]).addClass( 'active' );\n\n\t\t// Then we try to call the callback (if set)\n\t\tcb && cb( index );\n\t});\n\t// Self-set\n\t$tabs.filter( '.active' ).click();\n};\n\nconst initTinymceEditors = $editors => {\n\t// Initialize the TinyMCE editor inside the Tooltip tab\n\t$editors.each( ( index, editor ) => {\n\t\t// Find a free id. If our editor does not have an ID, we have to generate one\n\t\twhile ( null == editor.getAttribute( 'id' )) {\n\t\t\tconst newId = `editor${  Math.random().toString( 36 ).replace( /[^a-z]+/g, '' ).substr( 0, 10 ) }`;\n\t\t\t// If this editor ID is free, then set it. Else, loop using the parent `while`\n\t\t\tif ( 0 === $( newId ).length ) {\n\t\t\t\teditor.setAttribute( 'id', newId );\n\t\t\t}\n\t\t}\n\t\tconst editorId = editor.getAttribute( 'id' );\n\t\t// Save the current text in the not-yet-TinyMCE editor. It will be used later to restore the content\n\t\tconst text = editor.value;\n\t\t// Do effective call to tinymce & init the editor\n\t\ttinymce.init({\n\t\t\tselector:         `#${  editorId }`,\n\t\t\tmenubar:          false,\n\t\t\texternal_plugins: {\n\t\t\t\tcode:      `${ itge.base_assets }/deps/tinymce/code/plugin.min.js`,\n\t\t\t\twordcount: `${ itge.base_assets }/deps/tinymce/wordcount/plugin.min.js`,\n\t\t\t},\n\t\t\tplugins: 'wplink',\n\t\t\ttoolbar: [\n\t\t\t\t'styleselect | bold italic underline link | bullist numlist | alignleft aligncenter alignright alignjustify | code',\n\t\t\t],\n\t\t\tmin_height: 70,\n\t\t\theight:     70,\n\t\t\tresize:     false,\n\t\t});\n\t\t// **Restore the content**\n\t\tlet intervalContent = setInterval( () => {\n\t\t\tconst subeditor = tinymce.get( editorId );\n\t\t\t// Check if the subeditor is fully initialized. If that's the case, set its content & clear interval\n\t\t\tif ( subeditor && subeditor.getDoc() && subeditor.getBody()) {\n\t\t\t\titg.log( 'Initing subeditor with content ', JSON.stringify( text ));\n\t\t\t\tclearInterval( intervalContent );\n\t\t\t\tsubeditor.setContent( text.replace( /&/g, '&amp;' ));\n\t\t\t}\n\t\t}, 50 );\n\t});\n};\n\n// ##### `removeEditor`: Clean an editor\n/**\n * @function removeEditor\n * @description Clean an editor\n * @author gerkin\n * @param   {String} editorId Id of the editor to delete\n * @returns {undefined}\n */\nfunction removeTinymceEditor( editorId ) {\n\t// Sometimes (depending on the browser AFAIK), TinyMCE fails to execute the command to remove an editor. We then have to clean its data manually\n\ttry {\n\t\ttinymce.EditorManager.execCommand( 'mceRemoveEditor', true, editorId );\n\t} catch ( e ) {\n\t\tiThoughtsTooltipGlossary.warn( 'Force cleaning needed: ', e );\n\t\ttinymce.EditorManager.editors = tinymce.EditorManager.editors.filter( function findEditor( editor ) {\n\t\t\treturn editor.id !== editorId;\n\t\t});\n\t}\n};\n\nmodule.exports = {\n\tinitTab,\n\ttinymce: {\n\t\tinit: initTinymceEditors,\n\t\tremove: removeTinymceEditor,\n\t},\n};\n},{}],3:[function(require,module,exports){\n'use strict';\n\nconst {replaceQuotes} = iThoughtsTooltipGlossary;\nconst {isNA} = iThoughts.v5;\n\nclass OptArray {\n\tconstructor( opts ) {\n\t\tthis.opts = {};\n\t\tfor ( const key in opts ) {\n\t\t\tthis.addOpt( key, opts[key]);\n\t\t}\n\t}\n\n\tstatic generateAttr( label, value ) {\n\t\treturn `${ label }=\"${ value }\"`;\n\t}\n\n\taddOpt( label, value, specEncode = false ) {\n\t\tlabel = replaceQuotes( label.trim(), true );\n\t\tif ( !label.match( /^[\\w_\\-]*$/ )) {\n\t\t\treturn this;\n\t\t}\n\n\t\tvalue = String( value ).trim();\n\t\tvalue = ( !isNA( specEncode ) && specEncode ? value.replace( /\"/g, '&aquot;' ).replace( /\\n/g, '<br/>' ) : replaceQuotes( value, true ));\n\n\t\tthis.opts[label] = value;\n\t}\n\n\tmaybeAddOpt( addValue, name, value ) {\n\t\tif ( addValue ) {\n\t\t\tthis.addOpt( name, value );\n\t\t}\n\t}\n\n\ttoString() {\n\t\treturn Object.keys( this.opts ).map( key => OptArray.generateAttr( key, this.opts[key])).join( ' ' );\n\t}\n}\n\nmodule.exports = OptArray;\n\n},{}],4:[function(require,module,exports){\n/**\n * @file Client-side scripts for handling tooltip creation wizzard in Wordpress TinyMCE\n *\n * @author Gerkin\n * @copyright 2016 GerkinDevelopment\n * @license https://www.gnu.org/licenses/gpl-3.0.html GPLv3\n * @package ithoughts-tooltip-glossary\n *\n * @version 2.7.0\n */\n\n'use strict';\n\nconst utils     = require( './tinymce-utils' );\nconst filters   = require( './tinymce-filters' );\nconst domUtils = require('../dom-utils');\n\nconst ithoughts = iThoughts.v5;\nconst itg       = iThoughtsTooltipGlossary;\nconst itge      = iThoughtsTooltipGlossaryEditor;\n\nconst {\n\t$, $d, $w, \n} = ithoughts;\n\n\nmodule.exports = formDom => {\n\tconst $formDom = $(formDom);\n\tlet formType = '';\n\t// Depending on the ID present, we can deduce if we are in TIP or LIST creation/edition mode.\n\tif ( formDom.id === 'ithoughts_tt_gl-tooltip-form-container' ) {\n\t\tformType = 'TIP';\n\t} else if ( formDom.id === 'ithoughts_tt_gl-list-form-container') {\n\t\tformType = 'LIST';\n\t} else {\n\t\titg.error( 'Does not contains a tooltip form nor a list form, exit' );\n\t\treturn;\n\t}\n\titg.info( `Opening a form for ${ formType }` );\n\n\t// ## Tip form\n\tif ( 'TIP' === formType ) {\n\t\t( function initTipForm() {\n\t\t\t// Define the container for tooltip options in parent scope, so it can be used accross several events\n\t\t\tvar tooltipOpts;\n\t\t\t// Initialize the tab switcher between mode Glossary, Tooltip & Mediatip\n\t\t\tdomUtils.initTab( $( '#ithoughts_tt_gl-tooltip-form .tabs li' ), index => {\n\t\t\t\t// Only Glossary tooltip (tab @ index 0) disable the custom link editor\n\t\t\t\t$( '#tag-link' ).prop( 'disabled', 0 === index );\n\t\t\t});\n\t\t\t// Initialize the tab switcher of advanced options\n\t\t\tdomUtils.initTab( $( '#ithoughts_tt_gl-tooltip-form-options .tabs li' ));\n\t\t\t// Mode switcher for mediatips.  Hide all except the selected mode\n\t\t\t$( '.modeswitcher' ).on( 'click keyup change', function switchMode() {\n\t\t\t\tvar id = this.id;\n\t\t\t\t$( `[data-${  id  }]:not([data-${  id  }=\"mediatip-${  this.value  }-type\"])` ).hide();\n\t\t\t\t$( `[data-${  id  }~=\"mediatip-${  this.value  }-type\"]` ).show();\n\t\t\t}).keyup();\n\n\t\t\t// ##### `closeForm`: Clean the form, then call the callback function\n\t\t\t/**\n\t\t\t\t * @function closeForm\n\t\t\t\t * @description Clean the form, then call the callback function\n\t\t\t\t * @author gerkin\n\t\t\t\t * @param {Object} data Data of the tooltip\n\t\t\t\t * @returns {undefined}\n\t\t\t\t */\n\t\t\tconst closeForm = data => {\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\tdomUtils.tinymce.remove( 'tooltip-content' );\n\t\t\t\t}, 500 );\n\t\t\t\titge.finishTipTinymce( data );\n\t\t\t\tdelete itge.finishTipTinymce;\n\t\t\t}\n\n\t\t\t// ### TinyMCE editor for Tooltips\n\t\t\tdomUtils.tinymce.init( $( '#ithoughts_tt_gl-tooltip-form-container .tinymce' ));\n\n\t\t\t// ### Media library for Mediatips\n\t\t\t$( '#ithoughts_tt_gl_select_image' ).click( () => {\n\t\t\t\t// On click on `#ithoughts_tt_gl_select_image` (the button in mediatip), use the WP media API to get a media\n\t\t\t\t// > This code was copy/pasted. It may be improveable\n\t\t\t\tconst mediaFrame = wp.media({\n\t\t\t\t\tframe:   'post',\n\t\t\t\t\tstate:   'insert',\n\t\t\t\t\tlibrary: {\n\t\t\t\t\t\ttype: [ 'audio', 'video', 'image' ],\n\t\t\t\t\t},\n\t\t\t\t\tmultiple: false,\n\t\t\t\t});\n\n\t\t\t\t// **On validation of media library**\n\t\t\t\tmediaFrame.on( 'insert', () => {\n\t\t\t\t\t// Get the infos of the first selected element\n\t\t\t\t\tvar json = mediaFrame.state().get( 'selection' ).first();\n\t\t\t\t\t// If nothing selected, return\n\t\t\t\t\tif ( null == json ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tjson = json.toJSON();\n\t\t\t\t\t// Encode datas in the JSON input\n\t\t\t\t\t$( '#image-box-data' ).val( JSON.stringify({\n\t\t\t\t\t\turl:  json.url,\n\t\t\t\t\t\tid:   json.id,\n\t\t\t\t\t\tlink: json.link,\n\t\t\t\t\t}));\n\t\t\t\t\t// Display selected image\n\t\t\t\t\t$( '#image-box' ).html( `<img src=\"${  json.url  }\"/>` );\n\t\t\t\t\t$( '#mediatip-caption' ).val( json.caption );\n\t\t\t\t\t$( '#tag-link' ).val( json.link );\n\t\t\t\t});\n\n\t\t\t\t// Open the media library\n\t\t\t\tmediaFrame.open();\n\t\t\t});\n\n\t\t\t// ### Autocomplete for Glossaries\n\t\t\t( () => {\n\t\t\t\tvar input = $( '#gloss-title' ),\n\t\t\t\t\tcompleterHolder = $( '#gloss-title_completer' ),\n\t\t\t\t\tcompleterHolderContainer = $( '.gloss-title_completer_container' ),\n\t\t\t\t\tsearchedString = '',\n\t\t\t\t\trequest = null;\n\n\t\t\t\t// ##### `losefocustest`: Check if the completer holder or the input has the focus\n\t\t\t\tconst losefocustest = () => {\n\t\t\t\t\t// The timeout is required to let some time to the browser to change the focus status of the elements\n\t\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t\tif ( !completerHolder.find( '*:focus' ).length && !input.is( ':focus' )) {\n\t\t\t\t\t\t\t// Hide the `completerHolder`\n\t\t\t\t\t\t\tcompleterHolderContainer.addClass( 'hidden' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 100 );\n\t\t\t\t}\n\t\t\t\t// ##### `searchMatchingRes`: Does all the completion work from retrieved term catalog\n\t\t\t\tfunction searchMatchingRes() {\n\t\t\t\t\t// First, we filter terms contained in the global hash `iThoughtsTooltipGlossaryEditor`. Those terms will be splitted in 2 categories:\n\t\t\t\t\t// * those which **starts** with the searched string\n\t\t\t\t\t// * those which **contains** the searched string\n\t\t\t\t\tvar startsWith = [];\n\t\t\t\t\tvar contains = [];\n\t\t\t\t\titge.terms.map( element => {\n\t\t\t\t\t\tvar indx = element.title.toLowerCase().indexOf( searchedString );\n\t\t\t\t\t\tif ( -1 === indx ) {\n\t\t\t\t\t\t\tindx = element.slug.toLowerCase().indexOf( searchedString );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( -1 === indx ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else if ( 0 === indx ) {\n\t\t\t\t\t\t\tstartsWith.push( element );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcontains.push( element );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t// Then, concat both arrays to have the terms starting with the search before those who just contains the search\n\t\t\t\t\tvar searchResults = startsWith.concat( contains ).filter( function unique( item, pos, self ) {\n\t\t\t\t\t\treturn self.indexOf( item ) === pos;\n\t\t\t\t\t});\n\t\t\t\t\t// Clean the search result container, then re-fill it with items\n\t\t\t\t\tcompleterHolder.empty();\n\t\t\t\t\tvar length = searchResults.length;\n\t\t\t\t\tif ( length > 0 ) {\n\t\t\t\t\t\tfor ( var i = 0; i < length; i++ ) {\n\t\t\t\t\t\t\tvar item = searchResults[i];\n\t\t\t\t\t\t\t// If WPML is installed, `item` should contain the property `thislang`. If `thislang` is set to false, then the term is in another language than the current one, and we display it with a particular class\n\t\t\t\t\t\t\tif ( typeof item.thislang != 'undefined' && false === item.thislang )\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcompleterHolder.append( $.parseHTML( `<div tabindex=\"0\" class=\"option foreign-language\" data-id=\"${  item.id  }\" data-excerpt=\"${  item.content  }\"><p><b>${  item.title  }</b><br><em>${  item.slug  }</em></p></div>` ));\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\telse\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcompleterHolder.append( $.parseHTML( `<div tabindex=\"0\" class=\"option\" data-id=\"${  item.id  }\" data-excerpt=\"${  item.content  }\"><p><b>${  item.title  }</b><br><em>${  item.slug  }</em></p></div>` ));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcompleterHolder.append( $.parseHTML( '<p style=\"text-align:center\"><em>No results</em><p>' ));\n\t\t\t\t\t}\n\t\t\t\t\t// Once we have filled the search result container, display it and recalculate position\n\t\t\t\t\tcompleterHolderContainer.removeClass( 'hidden' );\n\t\t\t\t\tsetTimeout( resizeWindow, 25 );\n\t\t\t\t\t// On each result, make them selectable\n\t\t\t\t\tcompleterHolder.find( '.option' ).on( 'click', event => {\n\t\t\t\t\t\t// Set inputs with values provided by the option, then hide the completer holder\n\t\t\t\t\t\t$( '[name=\"gloss-id\"]' ).val( event.currentTarget.getAttribute( 'data-id' ));\n\t\t\t\t\t\tinput.val( $( event.currentTarget ).find( 'p > b' ).text());\n\t\t\t\t\t\tcompleterHolderContainer.addClass( 'hidden' );\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// ##### `resizeWindow`: Set styles of the completer holder\n\t\t\t\tfunction resizeWindow() {\n\t\t\t\t\t// The `completerHolder` element has to be positionned by JS. In fact, to overflow outside from the modal, it must not be a descendent of the modal. Thus, we can't position it via CSS\n\t\t\t\t\tvar top = completerHolder.offset().top - $w.scrollTop();\n\t\t\t\t\tvar bottom = $w.height();\n\t\t\t\t\tvar height = bottom - top;\n\t\t\t\t\tcompleterHolderContainer.css({\n\t\t\t\t\t\tmaxHeight: height,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t$w.resize( resizeWindow );\n\n\t\t\t\t// **Execute the search action**\n\t\t\t\tinput.on( 'keyup focusin', function focusin() {\n\t\t\t\t\t// First, check if we don't have any request currently running. If we have one, we have to `abort()` it\n\t\t\t\t\tif ( request ) {\n\t\t\t\t\t\trequest.abort();\n\t\t\t\t\t}\n\t\t\t\t\t// Then, compose the search string by removing accents or special characters\n\t\t\t\t\tsearchedString = utils.removeAccents( $( this ).val().toLowerCase());\n\t\t\t\t\t// Filter with already retrieved items. This is used to react before the real request is sent, then resulsq will be replaced with new retrieved ones\n\t\t\t\t\tsearchMatchingRes();\n\t\t\t\t\t// Do the request to get elements\n\t\t\t\t\tconst $nonce = $( '#ithoughts_tt_gl-tooltip-form-container [name=\"_wpnonce\"]' );\n\t\t\t\t\trequest = $.ajax({\n\t\t\t\t\t\turl:      itge.admin_ajax,\n\t\t\t\t\t\tmethod:   'POST',\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tdata:     {\n\t\t\t\t\t\t\taction:      'ithoughts_tt_gl_get_terms_list',\n\t\t\t\t\t\t\tsearch:      searchedString,\n\t\t\t\t\t\t\t_ajax_nonce: $nonce.val(),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcomplete( res ) {\n\t\t\t\t\t\t\tconst response = res.responseJSON;\n\t\t\t\t\t\t\tif ( 'undefined' == typeof response || !response.success ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$nonce.val( response.data.nonce_refresh );\n\t\t\t\t\t\t\t// Check if the response contains a different search string as the current one. It serves as an *outdated filter*\n\t\t\t\t\t\t\tif ( response.data.searched !== searchedString ) {\n\t\t\t\t\t\t\t\tiThoughtsTooltipGlossary.info( 'Outdated response' );\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Store terms, then refresh completions\n\t\t\t\t\t\t\titge.terms = response.data.terms;\n\t\t\t\t\t\t\tsearchMatchingRes();\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}).on( 'focusout', losefocustest ).on( 'keyup', function keyup() {\n\t\t\t\t\tthis.removeAttribute( 'data-term-id' );\n\t\t\t\t});\n\t\t\t})();\n\n\t\t\t// ### Set up Advanced Configuration\n\t\t\t( function initAdvancedConfiguration() {\n\t\t\t\tvar $opts = $( '#ithoughts_tt_gl-tooltip-form-options' ),\n\t\t\t\t\t$tooltip = $( '#ithoughts_tt_gl-tooltip-form' ),\n\t\t\t\t\tskip = {\n\t\t\t\t\t\tspan: false,\n\t\t\t\t\t\tlink: false,\n\t\t\t\t\t},\n\t\t\t\t\t$form = $( '#ithoughts_tt_gl-tooltip-form-options form' );\n\n\t\t\t\t// ##### `getOptsObject`: Get the advanced configuration object\n\t\t\t\t/**\n\t\t\t\t\t * @function getOptsObject\n\t\t\t\t\t * @author agermain\n\t\t\t\t\t * @returns {Object} Advanced Opts objects\n\t\t\t\t\t */\n\t\t\t\tfunction getOptsObject() {\n\t\t\t\t\tvar form = $form[0],\n\t\t\t\t\t\tformElems = form.elements,\n\t\t\t\t\t\ttristates = {},\n\t\t\t\t\t\tvalid = true,\n\t\t\t\t\t\tformFields = formElems.length,\n\t\t\t\t\t\ti = -1,\n\t\t\t\t\t\tattributes = {},\n\t\t\t\t\t\tattributesList = $( '#attributes-list option' ).map( function getAttributeValue() {\n\t\t\t\t\t\t\treturn this.value;\n\t\t\t\t\t\t}).toArray(),\n\t\t\t\t\t\topts,\n\t\t\t\t\t\ttypes = [ 'span', 'link' ];\n\t\t\t\t\t// Check the validity in the whole form\n\t\t\t\t\twhile ( ++i < formFields && valid ) {\n\t\t\t\t\t\tvar validity = formElems[i].validity;\n\t\t\t\t\t\tvalid &= validity.valid;\n\t\t\t\t\t\tif ( !validity.valid ) {\n\t\t\t\t\t\t\tformElems[i].focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Get tristate values to override default booleans\n\t\t\t\t\t$form.find( '.ithoughts-tristate' ).each( function getTristateValue() {\n\t\t\t\t\t\t$.extend( true, tristates, $( this ).serializeInputsObject({\n\t\t\t\t\t\t\t'-1': false,\n\t\t\t\t\t\t\t0:    null,\n\t\t\t\t\t\t\t1:    true,\n\t\t\t\t\t\t}[this.dataset.state]));\n\t\t\t\t\t});\n\t\t\t\t\t// Once we have retrieved all tristate states, we just have to inject it in the form values\n\t\t\t\t\topts = $.extend( true, $form.serializeObject(), tristates );\n\n\t\t\t\t\t// Get the key-value attributes on both link & span\n\t\t\t\t\tfor ( i = 0; i < 2; i++ ) {\n\t\t\t\t\t\tvar type = types[i];\n\t\t\t\t\t\t// Create the store\n\t\t\t\t\t\tattributes[type] = {};\n\t\t\t\t\t\t// Iterate on each category to get the value\n\t\t\t\t\t\tfor ( var arrK = opts[`attributes-${  type  }-key`] || [], arrV = opts[`attributes-${  type  }-value`] || [], j = 0, J = Math.min( arrK.length, arrV.length ); j < J; j++ ) {\n\t\t\t\t\t\t\tif ( arrK[j] && arrV[j]) {\n\t\t\t\t\t\t\t\t// If the key is not in the list of standard DOM attributes, we have to prefix it\n\t\t\t\t\t\t\t\tvar prefix = attributesList.indexOf( arrK[j]) > -1 ? '' : 'data-';\n\t\t\t\t\t\t\t\tattributes[type][prefix + arrK[j]] = arrV[j];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Clean the options object afterwars\n\t\t\t\t\t\tdelete opts[`attributes-${  type  }-value`];\n\t\t\t\t\t\tdelete opts[`attributes-${  type  }-key`];\n\t\t\t\t\t}\n\t\t\t\t\t// Add the attributes in the options object, then return it;\n\t\t\t\t\topts['attributes'] = attributes;\n\t\t\t\t\treturn opts;\n\t\t\t\t}\n\t\t\t\t// ##### `filterPrototypeInputs`: Used in filter to ignore if the element is a prototype. Used in key-value handlings\n\t\t\t\t/**\n\t\t\t\t\t * @function filterPrototypeInputs\n\t\t\t\t\t * @description Filtering function for prototypes. Used in key-value handlings\n\t\t\t\t\t * @author gerkin\n\t\t\t\t\t * @returns {Boolean} True if this element is not a prototype\n\t\t\t\t\t */\n\t\t\t\tfunction filterPrototypeInputs() {\n\t\t\t\t\treturn 0 === $( this ).closest( '.ithoughts-prototype' ).length;\n\t\t\t\t}\n\t\t\t\t// ##### `checkRemoveAttr`: Remove unused key/value pairs from the key/value editor\n\t\t\t\t/**\n\t\t\t\t\t * @function checkRemoveAttr\n\t\t\t\t\t * @description Remove unused key/value pairs from the key/value editor\n\t\t\t\t\t * @author gerkin\n\t\t\t\t\t * @returns {undefined}\n\t\t\t\t\t */\n\t\t\t\tfunction checkRemoveAttr() {\n\t\t\t\t\t// Separate the current event emitter event from other input\n\t\t\t\t\tvar thisInput = $( this ),\n\t\t\t\t\t\t$container = thisInput.parent().parent(),\n\t\t\t\t\t\totherInput = $container.find( 'input' ).filter( function filterNotThisInput() {\n\t\t\t\t\t\t\treturn this !== thisInput.get( 0 );\n\t\t\t\t\t\t});\n\n\t\t\t\t\t// Wait to let some time to the browser\n\t\t\t\t\tsetTimeout( function ensureRemoveContainer() {\n\t\t\t\t\t\tvar type = thisInput.closest( '.ithoughts-attrs-container' ).attr( 'data-attr-family' );\n\t\t\t\t\t\t// Test & clean the `skip` flag if required\n\t\t\t\t\t\tif ( skip[type]) {\n\t\t\t\t\t\t\tskip[type] = false;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Filter values\n\t\t\t\t\t\tthisInput.val( thisInput.val().trim());\n\t\t\t\t\t\totherInput.val( otherInput.val().trim());\n\n\t\t\t\t\t\t// If both values are empty & none have the focus, then remove the container\n\t\t\t\t\t\tif ( !thisInput.val() && !otherInput.val() && document.activeElement !== thisInput.get( 0 ) && document.activeElement !== otherInput.get( 0 )) {\n\t\t\t\t\t\t\t$container.remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 100 );\n\t\t\t\t}\n\n\t\t\t\t$opts.find( 'input[type=\"checkbox\"].ithoughts-tristate' ).attr( 'data-state', function getTristateValue( i, attrVal ) {\n\t\t\t\t\treturn (( attrVal || 0 ) - 1 ) % 3 + 2;\n\t\t\t\t}).change( function onTristateChange() {\n\t\t\t\t\t// Do the state rotation\n\t\t\t\t\tvar s = $( this ),\n\t\t\t\t\t\tts = (( s.attr( 'data-state' ) || 0 ) - 2 ) % 3 + 1;\n\t\t\t\t\ts.attr( 'data-state', ts );\n\t\t\t\t\tthis.checked = 1 === ts;\n\t\t\t\t\tthis.indeterminate = 0 === ts;\n\t\t\t\t}).change();\n\t\t\t\t// Bind GUI to show, close or save options\n\t\t\t\t$( '#ithoughts_tt_gl-tinymce-advanced_options' ).click( function showAttributesWindow() {\n\t\t\t\t\t$opts.show();\n\t\t\t\t\t$tooltip.hide();\n\t\t\t\t});\n\t\t\t\t$( '#ithoughts_tt_gl-tinymce-close-attrs' ).click( function closeDiscardAttributesWindow() {\n\t\t\t\t\t$opts.hide();\n\t\t\t\t\t$tooltip.show();\n\t\t\t\t});\n\t\t\t\t$( '#ithoughts_tt_gl-tinymce-validate-attrs' ).click( function closeAcceptAttributesWindow() {\n\t\t\t\t\ttooltipOpts = getOptsObject();\n\t\t\t\t\t$opts.hide();\n\t\t\t\t\t$tooltip.show();\n\t\t\t\t});\n\t\t\t\t// Bind events for the option that keep the tip opened for some times before closing\n\t\t\t\t$( '#tip-keep-open' ).change( function onQtipKeepOpenChange() {\n\t\t\t\t\tvar modeInput = $( '#tip-trigger' ),\n\t\t\t\t\t\ttextInput = $( '#tip-triggerText' ),\n\t\t\t\t\t\tmtInput = $([ modeInput, textInput ]),\n\t\t\t\t\t\toldValue;\n\t\t\t\t\t// This option force the opening event to be `click`\n\t\t\t\t\treturn function lockQtipTrigger() {\n\t\t\t\t\t\tmodeInput.prop( 'disabled', this.checked );\n\t\t\t\t\t\ttextInput.prop( 'disabled', !this.checked );\n\t\t\t\t\t\tmtInput.val( this.checked ? 'click' : oldValue );\n\t\t\t\t\t\tif ( this.checked ) {\n\t\t\t\t\t\t\toldValue = modeInput.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmodeInput.disabled = !( textInput.disabled = true );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}());\n\t\t\t\t// Bind Position selects\n\t\t\t\t$( '[name^=\"position[my]\"]' ).change( function onPositionMyChange() {\n\t\t\t\t\tvar base = '#position[my][',\n\t\t\t\t\t\tinputV = $( `${ base  }1]` ),\n\t\t\t\t\t\tinputH = $( `${ base  }2]` ),\n\t\t\t\t\t\tinputsHV = $( inputH.get( 0 ), inputV.get( 0 )),\n\t\t\t\t\t\tinputS = $( `${ base  }invert]` );\n\t\t\t\t\treturn function changePositionMy() {\n\t\t\t\t\t\tinputsHV.prop( 'required', inputV.val() || inputH.val() || inputS.prop( 'checked' ));\n\t\t\t\t\t};\n\t\t\t\t}());\n\t\t\t\t$( '[name^=\"position[at]\"]' ).change( function onPositionAtChange() {\n\t\t\t\t\tvar base = '#position[at][',\n\t\t\t\t\t\tinputV = $( `${ base  }1]` ),\n\t\t\t\t\t\tinputH = $( `${ base  }2]` ),\n\t\t\t\t\t\tinputsHV = $( inputH.get( 0 ), inputV.get( 0 ));\n\t\t\t\t\treturn function changePositionMy() {\n\t\t\t\t\t\tinputsHV.prop( 'required', inputV.val() || inputH.val());\n\t\t\t\t\t};\n\t\t\t\t}());\n\t\t\t\t// Initialize key/value pairs\n\t\t\t\t$( '.kv-pair-link-attrs-add,.kv-pair-span-attrs-add' ).bind( 'mouseup touchend', function onKvPairAdd() {\n\t\t\t\t\tvar $container = $( this ).parent().find( '.ithoughts-attrs-container' ),\n\t\t\t\t\t\t$invalidInputs = $container.find( 'input:invalid' ).filter( filterPrototypeInputs ),\n\t\t\t\t\t\ttype = $container.attr( 'data-attr-family' );\n\t\t\t\t\tskip[type] = true;\n\n\t\t\t\t\t// Check if every empty pairs are deleted\n\t\t\t\t\tif ( $invalidInputs.length > 0 ) {\n\t\t\t\t\t\tskip[type] = true;\n\t\t\t\t\t\t$invalidInputs.eq( 0 ).focus();\n\t\t\t\t\t\tcheckRemoveAttr.call( $invalidInputs.get( 0 ));\n\t\t\t\t\t\tskip[type] = false;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar $prototype = $container.find( '.ithoughts-prototype' ),\n\t\t\t\t\t\t$clone = $prototype.clone().removeClass( 'ithoughts-prototype' ),\n\t\t\t\t\t\tnewIdParts = [\n\t\t\t\t\t\t\t`attributes-${ type }-`,\n\t\t\t\t\t\t\t`-${ new Date().getTime() }`,\n\t\t\t\t\t\t];\n\t\t\t\t\t// Set the id/for attribute in the template\n\t\t\t\t\t$clone.find( '.dynamicId' ).each( function setForOrId() {\n\t\t\t\t\t\tvar $this = $( this ),\n\t\t\t\t\t\t\tnewId = newIdParts[0] + ( $this.hasClass( 'dynamicId-key' ) ? 'key' : 'value' ) + newIdParts[1];\n\t\t\t\t\t\t$this.attr( 'LABEL' === this.tagName ? 'for' : 'id', newId );\n\t\t\t\t\t});\n\t\t\t\t\t$container.append( $clone );\n\t\t\t\t\t// Enable inputs, then focus the first one\n\t\t\t\t\t$clone.find( 'input' ).prop( 'required', true ).prop( 'disabled', false ).blur( checkRemoveAttr ).eq( 0 ).focus();\n\t\t\t\t\tcheckRemoveAttr.call( $clone.find( 'input' ).get( 0 ));\n\t\t\t\t});\n\t\t\t\t$( '.ithoughts-attrs-container input' ).blur( checkRemoveAttr );\n\t\t\t\ttooltipOpts = getOptsObject();\n\t\t\t})();\n\n\t\t\t// This event listener generate a different tag with a different base url depending on the source of the video.\n\t\t\t$( '#mediatip_url_video_link' ).bind( 'keyup mouseup change click focusin focusout', function videoUrlChanged() {\n\t\t\t\tvar videodata = null,\n\t\t\t\t\tvalue = this.value,\n\t\t\t\t\tformatType;\n\t\t\t\t// Configure sources. See below for usage of those config objects\n\t\t\t\tvar formats = {\n\t\t\t\t\tyoutube: {\n\t\t\t\t\t\tregex: /^(?:https?:\\/\\/(?:youtu\\.be\\/|\\w*\\.youtube\\.\\w{2,3}\\/watch\\?v=)|<iframe .*?src=\"https?:\\/\\/\\w*\\.youtube\\.\\w{2,3}\\/embed\\/)([a-zA-Z0-9]*).*$/,\n\t\t\t\t\t\tembed: '<iframe width=\"512\" height=\"288\" src=\"https://www.youtube.com/embed/$1\" frameborder=\"0\" allowfullscreen></iframe>',\n\t\t\t\t\t\tvideo: 'https://www.youtube.com/watch?v=$1',\n\t\t\t\t\t},\n\t\t\t\t\tdailymotion: {\n\t\t\t\t\t\tregex: /^(?:https?:\\/\\/(?:dai\\.ly\\/|\\w*\\.dailymotion\\.\\w{2,3}\\/video\\/)|<iframe .*?src=\".*?\\w*\\.dailymotion\\.\\w{2,3}\\/embed\\/video\\/)([a-zA-Z0-9]*).*/,\n\t\t\t\t\t\tembed: '<iframe width=\"512\" height=\"288\" src=\"https://www.dailymotion.com/embed/video/$1\" frameborder=\"0\" allowfullscreen></iframe>',\n\t\t\t\t\t\tvideo: 'https://www.dailymotion.com/video/$1',\n\t\t\t\t\t},\n\t\t\t\t\tdirect: {\n\t\t\t\t\t\tregex: /^(.*\\.mp4)(\\?.*)?$/,\n\t\t\t\t\t\tembed: '<video width=\"512\" height=\"288\" controls=\"controls\"><source src=\"$1\" type=\"video/mp4\" /></video>',\n\t\t\t\t\t\tvideo: '$1',\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\t// Iterate on each configured type and try to match with one configured source\n\t\t\t\tfor ( var type in formats ) {\n\t\t\t\t\tformatType = formats[type];\n\t\t\t\t\t// If the regex match, then we have found our source. We can then generate the embed tag & the video url\n\t\t\t\t\tif ( value.match( formatType.regex )) {\n\t\t\t\t\t\tvideodata = {\n\t\t\t\t\t\t\tembed: value.replace( formatType.regex, formatType.embed ),\n\t\t\t\t\t\t\tvideo: value.replace( formatType.regex, formatType.video ),\n\t\t\t\t\t\t};\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Set the form inputs with new values. Note that we refresh also the video url input to ensure a consistent formatting\n\t\t\t\tif ( videodata ) {\n\t\t\t\t\t$( '#mediatip_url_video_embed' ).val( videodata.embed );\n\t\t\t\t\t$( this ).val( videodata.video );\n\t\t\t\t}\n\t\t\t}).keyup();\n\n\t\t\t// On click on the validate button, extract all required data from the form\n\t\t\t$( '#ithoughts_tt_gl-tinymce-validate' ).click(() => {\n\t\t\t\tlet data = {\n\t\t\t\t\ttype: [ 'gloss', 'tooltip', 'mediatip' ][$( '.tabs li.active' ).index()],\n\t\t\t\t\ttext: $( '#tag-text' ).val(),\n\t\t\t\t\tlink: $( '#tag-link' ).val(),\n\t\t\t\t\topts: tooltipOpts,\n\t\t\t\t};\n\t\t\t\titg.log( 'Before per-type form data handling:', data );\n\t\t\t\t// Depending on the target type of the tooltip, we have to retrieve specific data\n\t\t\t\tswitch ( data.type ) {\n\t\t\t\t\tcase 'glossary': {\n\t\t\t\t\t\tdata = $.extend( data, {\n\t\t\t\t\t\t\tgloss: {\n\t\t\t\t\t\t\t\tid:              $( '[name=\"gloss-id\"]' ).val(),\n\t\t\t\t\t\t\t\t// `disable_auto_translation` is related to WPML\n\t\t\t\t\t\t\t\tdisable_auto_translation: $( '[name=\"disable_auto_translation\"]' ).is( ':checked' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t} break;\n\n\t\t\t\t\tcase 'tooltip': {\n\t\t\t\t\t\tdata = $.extend( data, {\n\t\t\t\t\t\t\ttooltip: {\n\t\t\t\t\t\t\t\tcontent: tinymce.EditorManager.get( 'tooltip-content' ).getContent() || $( '#tooltip-content' ).val(),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t} break;\n\n\t\t\t\t\tcase 'mediatip': {\n\t\t\t\t\t\tdata = $.extend( data, {\n\t\t\t\t\t\t\tmediatip_type: $( '#mediatip_type' ).val(),\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// Mediatips has their own switch, depending on the type of media\n\t\t\t\t\t\tswitch ( data.mediatip_type ) {\n\t\t\t\t\t\t\tcase 'localimage': {\n\t\t\t\t\t\t\t\tdata = $.extend( data, {\n\t\t\t\t\t\t\t\t\tmediatip_content: $( '#image-box-data' ).val(),\n\t\t\t\t\t\t\t\t\tmediatipCaption: $( '#mediatip-caption' ).val(),\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} break;\n\n\t\t\t\t\t\t\tcase 'webimage': {\n\t\t\t\t\t\t\t\tdata = $.extend( data, {\n\t\t\t\t\t\t\t\t\tmediatip_content: $( '#mediatip_url_image' ).val(),\n\t\t\t\t\t\t\t\t\tmediatipCaption: $( '#mediatip-caption' ).val(),\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} break;\n\n\t\t\t\t\t\t\tcase 'webvideo': {\n\t\t\t\t\t\t\t\tdata = $.extend( data, {\n\t\t\t\t\t\t\t\t\tmediatip_content: $( '#mediatip_url_video_embed' ).val(),\n\t\t\t\t\t\t\t\t\tmediatip_link:    $( '#mediatip_url_video_link' ).val(),\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} break;\n\t\t\t\t\t\t}\n\t\t\t\t\t} break;\n\t\t\t\t}\n\t\t\t\tcloseForm( data );\n\t\t\t});\n\t\t\t$( '.ithoughts_tt_gl-tinymce-discard' ).click( closeForm.bind( null, null ));\n\t\t}());\n\t\t// ## List form\n\t} else if ( 'LIST' === formType ) {\n\t\t( function initListForm() {\n\t\t\tinitTab( $( '.tabs li' ));\n\n\t\t\t( function initGroupsPicker() {\n\t\t\t\tvar $ids = $( '#groups' ),\n\t\t\t\t\t$text = $( '#groups_text' ),\n\t\t\t\t\t$groupsPicker = $( '.groupspicker' ),\n\t\t\t\t\t$catchEvent = $([ $groupsPicker.get( 0 ), $text.parent().get( 0 ) ]),\n\t\t\t\t\t$checkboxes = $( '.groupspicker .group-select input' );\n\t\t\t\t$text.focusin(() => {\n\t\t\t\t\t$groupsPicker.toggleClass( 'hidden' );\n\n\t\t\t\t\tfunction catchEvent( e ) {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t}\n\t\t\t\t\tfunction hide() {\n\t\t\t\t\t\t$groupsPicker.toggleClass( 'hidden' );\n\t\t\t\t\t\t$catchEvent.off( 'click', catchEvent );\n\t\t\t\t\t}\n\t\t\t\t\t$catchEvent.click( catchEvent );\n\t\t\t\t\t$w.one( 'click', hide );\n\t\t\t\t});\n\t\t\t\t// Enable glossary group checkboxes (for the group picker)\n\t\t\t\t$checkboxes.change( function onGroupCheckboxChanged() {\n\t\t\t\t\tvar $checked = $checkboxes.filter( ':checked' ),\n\t\t\t\t\t\ttexts = [],\n\t\t\t\t\t\tids = [];\n\n\t\t\t\t\t$checked.each( function checkedAppendToArray() {\n\t\t\t\t\t\ttexts.push( $( this ).parent().find( '.group-title' ).text());\n\t\t\t\t\t\tids.push( $( this ).val());\n\t\t\t\t\t});\n\t\t\t\t\t$ids.val( ids.join( ',' ));\n\t\t\t\t\t$text.val( texts.join( ', ' ));\n\t\t\t\t}).change();\n\t\t\t}());\n\n\t\t\t$( '#ithoughts_tt_gl-tinymce-validate' ).click( function onClickValidate() {\n\t\t\t\t// Compose basic infos from raw datas\n\t\t\t\tvar data = {\n\t\t\t\t\ttype:  [ 'atoz', 'list' ][$( '.tabs li.active' ).index()],\n\t\t\t\t\talpha: $( '#letters' ).val(),\n\t\t\t\t\tgroup: $( '#groups' ).val(),\n\t\t\t\t\tdesc:  $( '#description_mode' ).val(),\n\t\t\t\t};\n\t\t\t\t// Remove useless fields\n\t\t\t\tif ( !data.alpha ) {\n\t\t\t\t\tdelete data.alpha;\n\t\t\t\t}\n\t\t\t\tif ( !data.group ) {\n\t\t\t\t\tdelete data.group;\n\t\t\t\t}\n\n\t\t\t\t// Switch for particular lists (Here, atoz isn't required as it does not have any additionnal parameters. This list may be extended in the future)\n\t\t\t\tswitch ( data.type ) {\n\t\t\t\t\tcase 'list': {\n\t\t\t\t\t\t$.extend( data, {\n\t\t\t\t\t\t\tcols: $( '#columns_count' ).val(),\n\t\t\t\t\t\t});\n\t\t\t\t\t} break; \n\t\t\t\t}\n\t\t\t\t// Finally, return the data\n\t\t\t\titge.finishListTinymce( data );\n\t\t\t});\n\t\t\t$( '.ithoughts_tt_gl-tinymce-discard' ).click( function onClickDiscard() {\n\t\t\t\titge.finishListTinymce();\n\t\t\t});\n\t\t}());\n\t}\n};\n\n},{\"../dom-utils\":2,\"./tinymce-filters\":5,\"./tinymce-utils\":7}],5:[function(require,module,exports){\n'use strict';\n\nconst OptArray = require( '../optarray' );\nconst utils = require( './tinymce-utils' );\nconst comon = require( '../comon' );\n\nconst attrsMatcher = /(data-)?([\\w\\d\\-]+?)=\"(.+?)\"/g;\n\n\nconst attributesToOpts = ( attrs, inner ) => {\n\tlet attrMatched;\n\tconst handleOpt = maybePrefixOpt( attrs );\n\tdo {\n\t\tattrMatched = attrsMatcher.exec( inner );\n\t\tif ( attrMatched ) {\n\t\t\thandleOpt( attrMatched );\n\t\t}\n\t} while ( attrMatched );\n};\n\nconst maybePrefixOpt = opt => {\n\treturn match => {\n\t\tlet key = comon.maybePrefixAttribute( match[1] + match[2]);\n\t\tconst value = match[3];\n\t\tif ( 'data-type' === key ) {\n\t\t\treturn;\n\t\t}\n\t\topt.addOpt( key, value );\n\t};\n};\n\nmodule.exports = {\n\treplace: {\n\t\ttip: content => { // For [glossary]\n\t\t\treturn content.replace( /\\[itg-(gloss|tooltip|mediatip)(?!_)(.*?)\\](.*?)\\[\\/itg-\\1\\]/g, ( all, tag, inner, text ) => {\n\t\t\t\tconst attrs\t= new OptArray();\n\t\t\t\tattrs.addOpt( 'data-type', `ithoughts-tooltip-glossary-${ tag }` );\n\t\t\t\tattributesToOpts( attrs, inner );\n\t\t\t\treturn `<a ${ attrs.toString() }>${  text  }</a>`;\n\t\t\t});\n\t\t},\n\t\tlist: content => { // For [glossary_(term_list|atoz)]\n\t\t\treturn content.replace( /\\[itg-(glossary|atoz)(?:\\s+(.*?))\\/\\]/g, ( all, tag, inner ) => {\n\t\t\t\tconst attrs\t= new OptArray();\n\t\t\t\tattrs.addOpt( 'data-type', `ithoughts-tooltip-glossary-${ tag }` );\n\t\t\t\tattributesToOpts( attrs, inner );\n\t\t\t\treturn `<span ${ attrs.toString()  }>${ 'glossary' === tag ? 'Glossary' : 'A-to-Z' }</span>`;\n\t\t\t});\n\t\t},\n\t},\n\trestore: {\n\t\ttip: content => { // For [itg-gloss]\n\t\t\treturn content.replace( /<a\\s+(?=[^>]*data-type=\"ithoughts-tooltip-glossary-(gloss|tooltip|mediatip)\")(.*?)>(.*?)<\\/a>/g, ( all, type, inner, text ) => {\n\t\t\t\tconst attrs\t= new OptArray();\n\t\t\t\tconst tag = `itg-${ type }`;\n\t\t\t\tattributesToOpts( attrs, inner );\n\t\t\t\treturn `[${ tag } ${ attrs.toString() }]${  text  }[/${ tag }]`;\n\t\t\t});\n\t\t},\n\t\tlist: content => { // For [glossary_(term_list|atoz)]\n\t\t\treturn content.replace( /<span\\s+(?=[^>]*data-type=\"ithoughts-tooltip-glossary-(glossary|atoz)\")(.*?)>.*?<\\/span>/g, ( all, type, inner ) => {\n\t\t\t\tconst attrs\t= new OptArray();\n\t\t\t\tconst tag = `itg-${ type }`;\n\t\t\t\tattributesToOpts( attrs, inner );\n\t\t\t\treturn `[${ tag } ${ attrs.toString() }/]`;\n\t\t\t});\n\t\t},\n\t},\n};\n\n},{\"../comon\":1,\"../optarray\":3,\"./tinymce-utils\":7}],6:[function(require,module,exports){\n/**\n * @file TinyMCE plugin scripts\n *\n * @author Gerkin\n * @copyright 2016 GerkinDevelopment\n * @license http://www.gnu.org/licenses/old-licenses/gpl-2.0.fr.html GPLv2\n * @package ithoughts-tooltip-glossary\n *\n * @version 2.7.0\n */\n\n'use strict';\n\nconst utils     = require( './tinymce-utils' );\nconst filters   = require( './tinymce-filters' );\nconst formHandler = require('./form-handler');\n\nconst ithoughts = iThoughts.v5;\nconst itg       = iThoughtsTooltipGlossary;\nconst itge      = iThoughtsTooltipGlossaryEditor;\n\n/* global tinymce:false, iThoughts: false, iThoughtsTooltipGlossary: false, iThoughtsTooltipGlossaryEditor: false */\n\nconst $            = ithoughts.$;\n\nconst setToggleable = ( element, editor ) => {\n\treturn function setToggleState() {\n\t\teditor.on( element, event => {\n\t\t\tthis.active( event.active );\n\t\t});\n\t};\n};\n\n\n$.extend( itge, {\n\treplaceShortcodes( content ) {\n\t\titge.replaceShortcodesEl.forEach( filter => content = filter( content ));\n\t\treturn content;\n\t},\n\trestoreShortcodes( content ) {\n\t\titge.restoreShortcodesEl.forEach( filter => content = filter( content ));\n\t\treturn content;\n\t},\n\treplaceShortcodesEl: [\n\t\tfilters.replace.tip,\n\t\tfilters.replace.list,\n\t],\n\trestoreShortcodesEl: [\n\t\tfilters.restore.tip,\n\t\tfilters.restore.list,\n\t],\n});\n\ntinymce.PluginManager.add( 'ithoughts_tt_gl_tinymce', editor => {\n\titge.editor = editor;\n\n\t//CSS\n\teditor.contentCSS.push( `${ itg.baseurl }/assets/dist/css/ithoughts_tt_gl-admin.min.css?v=2.7.0` );\n\t/*\n\n\t\tfunction getLang(str) {\n\t\t\teditor.getLang(prefix2 + str);\n\t\t}\n*/\n\n\teditor\n\t// Replace shortcodes with DOM\n\t\t.on( 'BeforeSetcontent', event => event.content = itge.replaceShortcodes( event.content ))\n\t// Replace DOM with shortcodes\n\t\t.on( 'GetContent', event => event.content = itge.restoreShortcodes( event.content ))\n\t// When moving the cursor\n\t\t.on( 'NodeChange', event => {\n\t\t// Get the new element under the cursor\n\t\t\tconst element = event.element;\n\t\t\t// If it is into a tooltip shortcode, set buttons state to active...\n\t\t\tif ( $( element ).closest( utils.tipsSelector ).length > 0 ) {\n\t\t\t\teditor.fire( 'glossaryterm', { active: true });\n\t\t\t\teditor.fire( 'glossaryterm-d', { active: true });\n\t\t\t// ...Else, disable them\n\t\t\t} else {\n\t\t\t\teditor.fire( 'glossaryterm', { active: false });\n\t\t\t\teditor.fire( 'glossaryterm-d', { active: false });\n\t\t\t}\n\t\t\t// Set the list button depending on the attribute `data-type`\n\t\t\tconst isInList = [ 'ithoughts-tooltip-glossary-term_list', 'ithoughts-tooltip-glossary-atoz' ].includes( element.getAttribute( 'data-type' ));\n\t\t\teditor.fire( 'glossarylist', { active: isInList });\n\t\t});\n\n\tconst insertInTinyMCE = ( shortcode, mode ) => {\n\t\t// Insert content when the window form is submitted\n\t\tif ( 'load' === mode ) {\n\t\t\teditor.selection.select( editor.selection.getStart());\n\t\t} else if ( mode.indexOf( 'extend' ) > -1 ) {\n\t\t\titg.error( 'Unhandled mode \"extend\" during writing of new tooltip shortcode' );\n\t\t}\n\t\teditor.insertContent( shortcode );\n\t};\n\n\t// ### Tooltip buttons\n\teditor.addButton( 'glossaryterm', {\n\t\ttitle:        editor.getLang( 'ithoughts_tt_gl_tinymce.add_tooltip' ),\n\t\timage:        `${ itge.base_assets }/dist/imgs/glossaryterm.png`,\n\t\tonPostRender: setToggleable( 'glossaryterm', editor ),\n\t\tonclick:      async() => {\n\t\t\tconst result = await utils.editorForms.tip( utils.generateSelObject( editor ));\n\t\t\tinsertInTinyMCE( result.finalContent, result.mode );\n\t\t},\n\t});\n\tQTags.addButton( 'ithoughts_tt_gl-tip', 'ITG Tip', async() => {\n\t\tconst result = await utils.editorForms.tip( utils.generateSelObject());\n\t\tQTags.insertContent( result.finalContent );\n\t});\n\t// #### Delete tooltip button\n\teditor.addButton( 'glossaryterm-d', {\n\t\ttitle:        editor.getLang( 'ithoughts_tt_gl_tinymce.remove_tooltip' ),\n\t\timage:        `${ itge.base_assets }/dist/imgs/glossaryterm-d.png`,\n\t\tonPostRender: setToggleable( 'glossaryterm-d', editor ),\n\t\tonclick:      () => {\n\t\t\tconst $currentNode = $( editor.selection.getNode());\n\t\t\t// Get the selected node\n\t\t\tconst $node = $currentNode.closest( utils.tipsSelector );\n\t\t\tconst node = $node.get( 0 );\n\t\t\tif ( !node ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t$node.replaceWith( node.innerHTML );\n\t\t},\n\t});\n\n\t// ### List button\n\teditor.addButton( 'glossarylist', {\n\t\ttitle:        editor.getLang( 'ithoughts_tt_gl_tinymce.add_index' ),\n\t\timage:        `${ itge.base_assets }/dist/imgs/glossaryindex.png`,\n\t\tonPostRender: setToggleable( 'glossarylist', editor ),\n\t\tonclick:      async() => {\n\t\t\tconst result = await utils.editorForms.list( utils.generateSelObject( editor ));\n\t\t\tinsertInTinyMCE( result.finalContent, result.mode );\n\t\t},\n\t});\n\tQTags.addButton( 'ithoughts_tt_gl-list', 'ITG List', async() => {\n\t\tconst result = await utils.editorForms.list( utils.generateSelObject(), true );\n\t\tQTags.insertContent( result.finalContent );\n\t});\n});\n\n},{\"./form-handler\":4,\"./tinymce-filters\":5,\"./tinymce-utils\":7}],7:[function(require,module,exports){\n'use strict';\n\nconst removeAccents = require( 'remove-accents' );\nconst OptArray      = require( '../optarray' );\nconst comon         = require( '../comon' );\n\nconst ithoughts     = iThoughts.v5;\nconst itg           = iThoughtsTooltipGlossary;\nconst itge          = iThoughtsTooltipGlossaryEditor;\n\nconst isNA = ithoughts.isNA;\n\nconst xhrError = xhr => {\n\tconst editor = itge.editor;\n\titg.error( 'Error while getting editor form for Tip or List: ', xhr );\n\tlet content = xhr.statusText;\n\tlet title = 'Error getting editor form';\n\tif ( 403 === xhr.status ) {\n\t\tconst lang = 'ithoughts_tt_gl_tinymce.error.forbidden';\n\t\tcontent = `<p>${ editor.getLang( `${ lang }.content_1` ) }<br/><a href=\"javascript:window.location.href=window.location.href\">${ editor.getLang( `${ lang }.content_2` ) }</a></p>`;\n\t\ttitle = editor.getLang( `${ lang }.title` );\n\t}\n\titg.growl( title, content, false );\n};\n\nconst splitAttr = ( attrsStr, separator = /[,\\.\\s]+/ ) => ( attrsStr || '' ).split( separator ).map( Function.prototype.call, String.prototype.trim ).filter( e => e );\n\nconst tristate = val => {\n\tif ( 'true' === val ) {\n\t\treturn true;\n\t}\n\tif ( 'false' === val ) {\n\t\treturn false;\n\t}\n\treturn null;\n};\n\nconst tipsTypes = [\n\t'itg-term',\n\t'itg-tooltip',\n\t'itg-mediatip',\n];\nconst tipsSelector = tipsTypes.map( type => `[data-type=\"${ type }\"]` ).join( ',' );\n\n\nconst generateSelObject = editor => {\n\tif ( isNA( editor )) {\n\t\tconst txtarea = $( '#content' ).get( 0 );\n\t\tconst sel = {\n\t\t\thtml: itge.replaceShortcodes( txtarea.value.substring( txtarea.selectionStart, txtarea.selectionEnd )),\n\t\t};\n\t\tsel.DOM = $.parseHTML( sel.html );\n\t\t$.extend( true, sel, {\n\t\t\tstart: $( sel.DOM ).first().get( 0 ),\n\t\t\tend:   $( sel.DOM ).last().get( 0 ),\n\t\t});\n\t\treturn sel;\n\t} else {\n\t\tconst tinymceSel = editor.selection;\n\t\tconst sel = {\n\t\t\tDOM:   $( tinymceSel.getNode()).closest( tipsSelector ).toArray(),\n\t\t\thtml:  tinymceSel.getContent({ format: 'html' }),\n\t\t\tstart: tinymceSel.getStart(),\n\t\t\tend:   tinymceSel.getEnd(),\n\t\t};\n\t\treturn sel;\n\t}\n};\n\nconst displayInForm = data => {\n\tconst $newDom = $( $.parseHTML( data, true ));\n\t$( document.body ).append( $newDom.css({\n\t\topacity: 1,\n\t}).animate({\n\t\topacity: 1,\n\t}, 500 ));\n\treturn $newDom;\n};\nconst hideOutForm = $dom => {\n\t$dom.animate({ \n\t\topacity: 0, \n\t}, 500, () => { \n\t\t$dom.remove(); \n\t});\n};\n\nconst editorForms = {\n\tasync list( selection ) {\n\t\titg.info( 'Selection infos to load LIST: ', selection );\n\t\tlet mode = 'insert_content';\n\t\tconst node = selection.start;\n\t\tconst values = {\n\t\t\ttype:  'atoz',\n\t\t\talpha: [],\n\t\t\tgroup: [], \n\t\t};\n\t\tif ( !isNA( selection.start ) && selection.start === selection.end ) {\n\t\t\titg.info( `Start & End node are the same, operating on a node of type ${  node.nodeName }` );\n\t\t\tif ( node && node.nodeName !== '#text' ) {\n\t\t\t\tconst takeAttr = generateTakeAttr( node );\n\t\t\t\tconst type = takeAttr( 'data-type' );\n\t\t\t\t$.extend( values, {\n\t\t\t\t\talphas: splitAttr( takeAttr( 'data-alphas' )),\n\t\t\t\t\tgroups: splitAttr( takeAttr( 'data-groups' )),\n\t\t\t\t\t'list-contenttype':  takeAttr( 'data-list-contenttype' ),\n\t\t\t\t});\n\t\t\t\tif ( 'ithoughts-tooltip-glossary-atoz' === type ) { // Is atoz\n\t\t\t\t\tmode = 'load';\n\t\t\t\t\tvalues.type = 'atoz';\n\t\t\t\t} else if ( 'ithoughts-tooltip-glossary-term_list' === type ) { // Is term_list\n\t\t\t\t\tmode = 'load';\n\t\t\t\t\tvalues.type = 'list';\n\t\t\t\t\t$.extend( values, {\n\t\t\t\t\t\tcols: parseInt( takeAttr( 'data-cols' )),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\tconst resultDom = displayInForm( await comon.sendAjaxQuery( 'get_tinymce_list_form', values, itge.nonce ));\n\n\t\t\treturn new Promise( resolve => {\n\t\t\t\titge.finishListTinymce = data => {\n\t\t\t\t\titg.info( 'New list data:', data );\n\t\t\t\t\thideOutForm( resultDom );\n\t\t\t\t\tif ( isNA( data )) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst shortcode = `itg-${ data.type }`;\n\t\t\t\t\tconst tail = ( mode !== 'load' ) ? ' ' : '';\n\t\t\t\t\tconst optArr = new OptArray();\n\n\n\t\t\t\t\tconst attrs = [ 'alphas', 'groups', 'list-contenttype' ];\n\t\t\t\t\tif ( 'glossary' === data.type ) {\n\t\t\t\t\t\tattrs.push( 'cols' );\n\t\t\t\t\t}\n\n\t\t\t\t\tattrs.forEach( attr => {\n\t\t\t\t\t\tif ( data.hasOwnProperty( attr )) {\n\t\t\t\t\t\t\toptArr.addOpt( attr, data[attr]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tconst finalContent = `[${  shortcode  } ${  optArr.toString()  }/]${  tail }`;\n\t\t\t\t\titg.log( 'Final content:', finalContent );\n\t\t\t\t\treturn resolve({\n\t\t\t\t\t\tfinalContent,\n\t\t\t\t\t\tmode, \n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t});\n\t\t} catch ( error ) {\n\t\t\txhrError( error );\n\t\t}\n\t},\n\tasync tip( selection, escapeContent ) {\n\t\titg.info( 'Selection infos to load TIP: ', selection );\n\t\tconst node\t= selection.start;\n\t\tlet values\t= {};\n\t\tlet mode\t= '';\n\t\tif ( !isNA( selection.start ) && selection.start === selection.end ) {\n\t\t\titg.info( `Start & End node are the same, operating on a node of type ${  node.nodeName }` );\n\t\t\tconst content = ( node && node.text ) || selection.html; // Get node text if any or get selection\n\t\t\titg.log( 'Loading content: ', content );\n\t\t\tif ( node && node.nodeName !== '#text' && tipsTypes.indexOf( node.getAttribute( 'data-type' )) > -1 ) {\n\t\t\t\t// On Glossary Term or Tooltip or Mediatip, load data\n\t\t\t\tmode = 'load';\n\t\t\t\tconst attrs = takeAttr( node );\n\t\t\t\tconst takeAttr = generateTakeAttr( attrs );\n\n\t\t\t\t// Pick attributes\n\t\t\t\tlet positionAt = splitAttr( takeAttr( 'position-at' ) || ' ' );\n\t\t\t\tlet positionMy = splitAttr( takeAttr( 'position-my' ) || ' ' );\n\t\t\t\tconst myInverted =\n\t\t\t\t\t  ( 1 === Math.max( positionMy.indexOf( 'top' ), positionMy.indexOf( 'bottom' ))) ||\n\t\t\t\t\t  ( 0 === Math.max( positionMy.indexOf( 'right' ), positionMy.indexOf( 'left' )));\n\t\t\t\tpositionAt = {\n\t\t\t\t\t1: positionAt[0],\n\t\t\t\t\t2: positionAt[1],\n\t\t\t\t};\n\t\t\t\tpositionMy = {\n\t\t\t\t\t1:      positionMy[myInverted ? 1 : 0],\n\t\t\t\t\t2:      positionMy[myInverted ? 0 : 1],\n\t\t\t\t\tinvert: myInverted ? 'enabled' : undefined,\n\t\t\t\t};\n\n\n\t\t\t\tlet tooltipContent = takeAttr( 'tooltip-content' );\n\t\t\t\tif ( escapeContent && tooltipContent ) {\n\t\t\t\t\ttooltipContent = tooltipContent.replace( /&lt;/g, '<' ).replace( /&gt;/g, '>' );\n\t\t\t\t}\n\n\t\t\t\t// Create the base value object. It will be filled with other attributes\n\t\t\t\tvalues = {\n\t\t\t\t\ttext:             content,\n\t\t\t\t\tlink:             takeAttr( 'href', true ),\n\t\t\t\t\tgloss:{\n\t\t\t\t\t\tid:      takeAttr( 'gloss-id' ),\n\t\t\t\t\t\tsearch:      itge.removeAccents( content.toLowerCase()),\n\t\t\t\t\t\tdisable_auto_translation: 'true' === ( takeAttr( 'disable_auto_translation' ) || false ),\n\t\t\t\t\t},\n\t\t\t\t\ttooltip:{\n\t\t\t\t\t\tcontent:  itg.replaceQuotes( tooltipContent || content, false ),\n\t\t\t\t\t},\n\t\t\t\t\tmediatip: {\n\t\t\t\t\t\ttype:    takeAttr( 'mediatip-type' ),\n\t\t\t\t\t\tcontent: itg.replaceQuotes( takeAttr( 'mediatip-content' ), false ),\n\t\t\t\t\t\tlink:    takeAttr( 'mediatip-link' ),\n\t\t\t\t\t\tcaption: takeAttr( 'mediatip-caption' ),\n\t\t\t\t\t},\n\t\t\t\t\ttype:             [ 'glossary', 'tooltip', 'mediatip' ][tipsTypes.indexOf( takeAttr( 'type' ))],\n\t\t\t\t\topts:             {\n\t\t\t\t\t\tcontenttype:      takeAttr( 'gloss-contenttype' ),\n\t\t\t\t\t\t'tip-keep-open': 'true' === takeAttr( 'tip-keep-open' ),\n\t\t\t\t\t\ttipRounded:      tristate( takeAttr( 'tip-rounded' )),\n\t\t\t\t\t\ttipShadow:       tristate( takeAttr( 'tip-shadow' )),\n\t\t\t\t\t\ttipStyle:        takeAttr( 'tip-style' ),\n\t\t\t\t\t\ttipTrigger:      takeAttr( 'tip-trigger' ),\n\t\t\t\t\t\tposition:         {\n\t\t\t\t\t\t\tat:\tpositionAt,\n\t\t\t\t\t\t\tmy:\tpositionMy,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tanim: {\n\t\t\t\t\t\t\tin:   takeAttr( 'animation_in' ),\n\t\t\t\t\t\t\tout:  takeAttr( 'animation_out' ),\n\t\t\t\t\t\t\ttime: takeAttr( 'animation_time' ),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmaxwidth: takeAttr( 'tooltip-maxwidth' ),\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\t// With all attributes left, append them to the attributes option\n\t\t\t\tvalues.opts.attributes = attrs;\n\t\t\t} else {\n\t\t\t\t// Create new gloss\n\t\t\t\tvalues\t= {\n\t\t\t\t\ttext:             '',\n\t\t\t\t\tlink:             '',\n\t\t\t\t\tgloss:{\n\t\t\t\t\t\tid:      null,\n\t\t\t\t\t\tsearch:      '',\n\t\t\t\t\t\tdisable_auto_translation: false,\n\t\t\t\t\t},\n\t\t\t\t\ttooltip:{\n\t\t\t\t\t\tcontent:  '',\n\t\t\t\t\t},\n\t\t\t\t\tmediatip: {\n\t\t\t\t\t\ttype:    '',\n\t\t\t\t\t\tcontent: '',\n\t\t\t\t\t\tlink:    '',\n\t\t\t\t\t\tcaption: '',\n\t\t\t\t\t},\n\t\t\t\t\ttype:             'tooltip',\n\t\t\t\t};\n\t\t\t\t// If something is selected, load the content as text, content for tooltip & search\n\t\t\t\tif ( content && content.length > 0 ) {\n\t\t\t\t\tmode\t= 'replace_content';\n\t\t\t\t\tvalues\t= $.extend( values, {\n\t\t\t\t\t\ttext:            content,\n\t\t\t\t\t\ttooltip: {\n\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgloss:{\n\t\t\t\t\t\t\tsearch:     utils.removeAccents( content.toLowerCase()),\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tmode\t= 'add_content';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Then generate form through Ajax\n\n\t\ttry {\n\t\t\tconst resultDom = displayInForm( await comon.sendAjaxQuery( 'get_tinymce_tooltip_form', values, itge.nonce ));\n\n\t\t\treturn new Promise( resolve => {\n\t\t\t\titge.finishTipTinymce = data => {\n\t\t\t\t\thideOutForm( resultDom );\n\t\t\t\t\titg.info( 'New tooltip data:', data );\n\t\t\t\t\tif ( isNA( data )) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst optArr = new OptArray();\n\t\t\t\t\tconst attributesList = resultDom.find( '#attributes-list option' ).map( elem => elem.value ).toArray();\n\t\t\t\t\tconst shortcode = `itg-${  data.type }`;\n\t\t\t\t\tconst tail = ( mode !== 'load' && 0 === content.length ) ? ' ' : '';\n\t\t\t\t\t// Get new options, or old one\n\t\t\t\t\tconst opts = data.opts || values.opts;\n\t\t\t\t\tconst optsAttrs = ( opts && opts.attributes ) || {};\n\n\t\t\t\t\tif ( !isNA( opts )) {\n\t\t\t\t\t\toptArr.maybeAddOpt( opts['gloss-contenttype'], 'data-gloss-contenttype', opts['gloss-contenttype']);\n\t\t\t\t\t\toptArr.maybeAddOpt( opts['tip-keep-open'], 'data-tip-keep-open', 'true' );\n\t\t\t\t\t\toptArr.maybeAddOpt( !isNA( opts.tipRounded ), 'data-tip-rounded', String( opts.tipRounded ));\n\t\t\t\t\t\toptArr.maybeAddOpt( !isNA( opts.tipShadow ), 'data-tip-shadow', String( opts.tipShadow ));\n\t\t\t\t\t\toptArr.maybeAddOpt( opts.tipStyle, 'data-tip-style', opts.tipStyle );\n\t\t\t\t\t\toptArr.maybeAddOpt( opts.tipTrigger, 'data-tip-trigger', opts.tipTrigger );\n\t\t\t\t\t\tif ( opts.position ) {\n\t\t\t\t\t\t\tif ( opts.position.at && opts.position.at[1] && opts.position.at[2]) {\n\t\t\t\t\t\t\t\toptArr.addOpt( 'data-position-at', `${ opts.position.at[1] } ${  opts.position.at[2] }` );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ( opts.position.my && opts.position.my[1] && opts.position.my[2]) {\n\t\t\t\t\t\t\t\tconst my = [ opts.position.my[1], opts.position.my[2] ];\n\t\t\t\t\t\t\t\tif ( opts.position.my.invert ) {\n\t\t\t\t\t\t\t\t\tmy.reverse();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\toptArr.addOpt( 'data-position-my', my.join( ' ' ));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( opts.anim ) {\n\t\t\t\t\t\t\toptArr.maybeAddOpt( opts.anim.in, 'data-animation_in', opts.anim.in );\n\t\t\t\t\t\t\toptArr.maybeAddOpt( opts.anim.out, 'data-animation_out', opts.anim.out );\n\t\t\t\t\t\t\toptArr.maybeAddOpt( opts.anim.time, 'data-animation_time', opts.anim.time );\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptArr.maybeAddOpt( opts.maxwidth, 'data-tooltip-maxwidth', opts.maxwidth );\n\t\t\t\t\t\t/*if ( optsAttrs.hasOwnProperty( type )) {\n\t\t\t\t\t\t\t\tfor ( j in optsAttrs[type]) {\n\t\t\t\t\t\t\t\t\tif ( optsAttrs[type].hasOwnProperty( j )) {\n\t\t\t\t\t\t\t\t\t\tconst prefix = attributesList.indexOf( j ) > -1 && !j.startsWith( 'data-' ) ? '' : 'data-';\n\t\t\t\t\t\t\t\t\t\tconst midPart = 'link' === type ? 'link-' : '';\n\t\t\t\t\t\t\t\t\t\toptArr.addOpt( prefix + midPart + j, optsAttrs[type][j], true );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}*/\n\t\t\t\t\t}\n\t\t\t\t\toptArr.maybeAddOpt( opts.link, 'href', encodeURI( data.link ));\n\n\t\t\t\t\tif ( 'gloss' === data.type ) {\n\t\t\t\t\t\tif ( !data.glossId || !data.text ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toptArr.addOpt( 'glossId', data.glossId );\n\t\t\t\t\t\t\tif ( data.disable_auto_translation ) {\n\t\t\t\t\t\t\t\toptArr.addOpt( 'disable_auto_translation', 'true' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if ( 'tooltip' === data.type ) {\n\t\t\t\t\t\tif ( !data.tooltip_content || !data.text ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taddOpt( 'tooltip-content', escapeContent ? data.tooltip_content.replace( /</g, '&lt;' ).replace( />/g, '&gt;' ) : data.tooltip_content, true );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if ( 'mediatip' === data.type ) {\n\t\t\t\t\t\tif ( !data.mediatip_type || !data.mediatip_content || !data.text ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taddOpt( 'mediatip-type', data.mediatip_type );\n\t\t\t\t\t\t\taddOpt( 'mediatip-content', data.mediatip_content, true );\n\t\t\t\t\t\t\tif ( data.mediatipCaption ) {\n\t\t\t\t\t\t\t\taddOpt( 'mediatip-caption', data.mediatipCaption, true );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tconst finalContent = `[${  shortcode  } ${  optArr.toString()  }]${  data.text  }[/${  shortcode  }]${  tail }`;\n\t\t\t\t\titg.log( 'Final content:', finalContent );\n\t\t\t\t\treturn resolve({\n\t\t\t\t\t\tfinalContent,\n\t\t\t\t\t\tmode, \n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t});\n\t\t} catch ( error ) {\n\t\t\txhrError( error );\n\t\t}\n\t},\n};\n\nconst utils = {\n\teditorForms,\n\tgenerateSelObject,\n\thideOutForm,\n\ttipsTypes,\n\ttipsSelector,\n\tremoveAccents,\n};\n\nmodule.exports = utils;\n\n},{\"../comon\":1,\"../optarray\":3,\"remove-accents\":9}],8:[function(require,module,exports){\n(function (global){\n/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    if (typeof global.process === \"object\" && global.process.domain) {\n      invoke = global.process.domain.bind(invoke);\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // Among the various tricks for obtaining a reference to the global\n  // object, this seems to be the most reliable technique that does not\n  // use indirect eval (which violates Content Security Policy).\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this\n);\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],9:[function(require,module,exports){\nvar characterMap = {\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"AE\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"A\",\r\n\t\"\": \"C\",\r\n\t\"\": \"C\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"E\",\r\n\t\"\": \"I\",\r\n\t\"\": \"I\",\r\n\t\"\": \"I\",\r\n\t\"\": \"I\",\r\n\t\"\": \"I\",\r\n\t\"\": \"I\",\r\n\t\"\": \"D\",\r\n\t\"\": \"N\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"O\",\r\n\t\"\": \"U\",\r\n\t\"\": \"U\",\r\n\t\"\": \"U\",\r\n\t\"\": \"U\",\r\n\t\"\": \"Y\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"ae\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"a\",\r\n\t\"\": \"c\",\r\n\t\"\": \"c\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"e\",\r\n\t\"\": \"i\",\r\n\t\"\": \"i\",\r\n\t\"\": \"i\",\r\n\t\"\": \"i\",\r\n\t\"\": \"i\",\r\n\t\"\": \"i\",\r\n\t\"\": \"d\",\r\n\t\"\": \"n\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"o\",\r\n\t\"\": \"u\",\r\n\t\"\": \"u\",\r\n\t\"\": \"u\",\r\n\t\"\": \"u\",\r\n\t\"\": \"y\",\r\n\t\"\": \"y\",\r\n\t\"\": \"A\",\r\n\t\"\": \"a\",\r\n\t\"\": \"A\",\r\n\t\"\": \"a\",\r\n\t\"\": \"A\",\r\n\t\"\": \"a\",\r\n\t\"\": \"C\",\r\n\t\"\": \"c\",\r\n\t\"\": \"C\",\r\n\t\"\": \"c\",\r\n\t\"\": \"C\",\r\n\t\"\": \"c\",\r\n\t\"\": \"C\",\r\n\t\"\": \"c\",\r\n\t\"C\": \"C\",\r\n\t\"c\": \"c\",\r\n\t\"\": \"D\",\r\n\t\"\": \"d\",\r\n\t\"\": \"D\",\r\n\t\"\": \"d\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"\": \"G\",\r\n\t\"\": \"G\",\r\n\t\"\": \"g\",\r\n\t\"\": \"g\",\r\n\t\"\": \"G\",\r\n\t\"\": \"g\",\r\n\t\"\": \"G\",\r\n\t\"\": \"g\",\r\n\t\"\": \"G\",\r\n\t\"\": \"g\",\r\n\t\"\": \"H\",\r\n\t\"\": \"h\",\r\n\t\"\": \"H\",\r\n\t\"\": \"h\",\r\n\t\"\": \"H\",\r\n\t\"\": \"h\",\r\n\t\"\": \"I\",\r\n\t\"\": \"i\",\r\n\t\"\": \"I\",\r\n\t\"\": \"i\",\r\n\t\"\": \"I\",\r\n\t\"\": \"i\",\r\n\t\"\": \"I\",\r\n\t\"\": \"i\",\r\n\t\"\": \"I\",\r\n\t\"\": \"i\",\r\n\t\"\": \"IJ\",\r\n\t\"\": \"ij\",\r\n\t\"\": \"J\",\r\n\t\"\": \"j\",\r\n\t\"\": \"K\",\r\n\t\"\": \"k\",\r\n\t\"\": \"K\",\r\n\t\"\": \"k\",\r\n\t\"K\": \"K\",\r\n\t\"k\": \"k\",\r\n\t\"\": \"L\",\r\n\t\"\": \"l\",\r\n\t\"\": \"L\",\r\n\t\"\": \"l\",\r\n\t\"\": \"L\",\r\n\t\"\": \"l\",\r\n\t\"\": \"L\",\r\n\t\"\": \"l\",\r\n\t\"\": \"l\",\r\n\t\"\": \"l\",\r\n\t\"\": \"M\",\r\n\t\"\": \"m\",\r\n\t\"M\": \"M\",\r\n\t\"m\": \"m\",\r\n\t\"\": \"N\",\r\n\t\"\": \"n\",\r\n\t\"\": \"N\",\r\n\t\"\": \"n\",\r\n\t\"\": \"N\",\r\n\t\"\": \"n\",\r\n\t\"\": \"n\",\r\n\t\"N\": \"N\",\r\n\t\"n\": \"n\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"OE\",\r\n\t\"\": \"oe\",\r\n\t\"P\": \"P\",\r\n\t\"p\": \"p\",\r\n\t\"\": \"R\",\r\n\t\"\": \"r\",\r\n\t\"\": \"R\",\r\n\t\"\": \"r\",\r\n\t\"\": \"R\",\r\n\t\"\": \"r\",\r\n\t\"R\": \"R\",\r\n\t\"r\": \"r\",\r\n\t\"\": \"R\",\r\n\t\"\": \"r\",\r\n\t\"\": \"S\",\r\n\t\"\": \"s\",\r\n\t\"\": \"S\",\r\n\t\"\": \"s\",\r\n\t\"\": \"S\",\r\n\t\"\": \"S\",\r\n\t\"\": \"s\",\r\n\t\"\": \"s\",\r\n\t\"\": \"S\",\r\n\t\"\": \"s\",\r\n\t\"\": \"T\",\r\n\t\"\": \"t\",\r\n\t\"\": \"t\",\r\n\t\"\": \"T\",\r\n\t\"\": \"T\",\r\n\t\"\": \"t\",\r\n\t\"\": \"T\",\r\n\t\"\": \"t\",\r\n\t\"T\": \"T\",\r\n\t\"t\": \"t\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"V\": \"V\",\r\n\t\"v\": \"v\",\r\n\t\"\": \"W\",\r\n\t\"\": \"w\",\r\n\t\"\": \"W\",\r\n\t\"\": \"w\",\r\n\t\"X\": \"X\",\r\n\t\"x\": \"x\",\r\n\t\"\": \"Y\",\r\n\t\"\": \"y\",\r\n\t\"\": \"Y\",\r\n\t\"Y\": \"Y\",\r\n\t\"y\": \"y\",\r\n\t\"\": \"Z\",\r\n\t\"\": \"z\",\r\n\t\"\": \"Z\",\r\n\t\"\": \"z\",\r\n\t\"\": \"Z\",\r\n\t\"\": \"z\",\r\n\t\"\": \"s\",\r\n\t\"\": \"f\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"A\",\r\n\t\"\": \"a\",\r\n\t\"\": \"I\",\r\n\t\"\": \"i\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"A\",\r\n\t\"\": \"a\",\r\n\t\"\": \"AE\",\r\n\t\"\": \"ae\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"TH\",\r\n\t\"\": \"th\",\r\n\t\"\": \"P\",\r\n\t\"\": \"p\",\r\n\t\"\": \"S\",\r\n\t\"\": \"s\",\r\n\t\"X\": \"X\",\r\n\t\"x\": \"x\",\r\n\t\"\": \"\",\r\n\t\"\": \"\",\r\n\t\"\": \"\",\r\n\t\"\": \"\",\r\n\t\"A\": \"A\",\r\n\t\"a\": \"a\",\r\n\t\"E\": \"E\",\r\n\t\"e\": \"e\",\r\n\t\"I\": \"I\",\r\n\t\"i\": \"i\",\r\n\t\"\": \"N\",\r\n\t\"\": \"n\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"\": \"W\",\r\n\t\"\": \"w\",\r\n\t\"\": \"Y\",\r\n\t\"\": \"y\",\r\n\t\"\": \"A\",\r\n\t\"\": \"a\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"\": \"I\",\r\n\t\"\": \"i\",\r\n\t\"\": \"O\",\r\n\t\"\": \"o\",\r\n\t\"\": \"R\",\r\n\t\"\": \"r\",\r\n\t\"\": \"U\",\r\n\t\"\": \"u\",\r\n\t\"B\": \"B\",\r\n\t\"b\": \"b\",\r\n\t\"\": \"C\",\r\n\t\"\": \"c\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"F\": \"F\",\r\n\t\"f\": \"f\",\r\n\t\"\": \"G\",\r\n\t\"\": \"g\",\r\n\t\"\": \"H\",\r\n\t\"\": \"h\",\r\n\t\"J\": \"J\",\r\n\t\"\": \"j\",\r\n\t\"\": \"K\",\r\n\t\"\": \"k\",\r\n\t\"M\": \"M\",\r\n\t\"m\": \"m\",\r\n\t\"P\": \"P\",\r\n\t\"p\": \"p\",\r\n\t\"Q\": \"Q\",\r\n\t\"q\": \"q\",\r\n\t\"\": \"R\",\r\n\t\"\": \"r\",\r\n\t\"\": \"S\",\r\n\t\"\": \"s\",\r\n\t\"V\": \"V\",\r\n\t\"v\": \"v\",\r\n\t\"W\": \"W\",\r\n\t\"w\": \"w\",\r\n\t\"X\": \"X\",\r\n\t\"x\": \"x\",\r\n\t\"Y\": \"Y\",\r\n\t\"y\": \"y\",\r\n\t\"A\": \"A\",\r\n\t\"a\": \"a\",\r\n\t\"B\": \"B\",\r\n\t\"b\": \"b\",\r\n\t\"\": \"D\",\r\n\t\"\": \"d\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"\": \"E\",\r\n\t\"\": \"e\",\r\n\t\"\": \"H\",\r\n\t\"\": \"h\",\r\n\t\"I\": \"I\",\r\n\t\"i\": \"i\",\r\n\t\"\": \"I\",\r\n\t\"\": \"i\",\r\n\t\"M\": \"M\",\r\n\t\"m\": \"m\",\r\n\t\"O\": \"O\",\r\n\t\"o\": \"o\",\r\n\t\"Q\": \"Q\",\r\n\t\"q\": \"q\",\r\n\t\"U\": \"U\",\r\n\t\"u\": \"u\",\r\n\t\"X\": \"X\",\r\n\t\"x\": \"x\",\r\n\t\"Z\": \"Z\",\r\n\t\"z\": \"z\",\r\n};\r\n\r\nvar chars = Object.keys(characterMap).join('|');\r\nvar allAccents = new RegExp(chars, 'g');\r\nvar firstAccent = new RegExp(chars, '');\r\n\r\nvar removeAccents = function(string) {\t\r\n\treturn string.replace(allAccents, function(match) {\r\n\t\treturn characterMap[match];\r\n\t});\r\n};\r\n\r\nvar hasAccents = function(string) {\r\n\treturn !!string.match(firstAccent);\r\n};\r\n\r\nmodule.exports = removeAccents;\r\nmodule.exports.has = hasAccents;\r\nmodule.exports.remove = removeAccents;\r\n\n},{}]},{},[6]);\n"]}